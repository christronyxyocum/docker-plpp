#!/usr/bin/with-contenv bash

# Fetch site or update existing
if [[ ! -d /config/www/plpp/.git ]]; then
  echo '-------------------'
  echo '| Installing plpp |'
  echo '-------------------'
  git clone https://github.com/christronyxyocum/plpp.git /config/www/plpp
elif [[ -d /config/www/plpp/.git ]]; then
  echo '-------------------'
  echo '|  Updating plpp  |'
  echo '-------------------'
  cd /config/www/plpp || return
  git reset --hard origin/master
  git pull --rebase
fi

# Set Permissions
chown -R abc:abc \
	/config
chmod 777 \
  /config/www/plpp/cache
chmod 777 \
/config/www/plpp/config
